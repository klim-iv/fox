<html>
	<head>
		<link href="/css/bootstrap.min.css" rel="stylesheet" media="screen" />
		<script src="/js/spin.min.js" type="text/javascript"></script>
		<script>
			function do_spin(id) {
			  var opts = {
					  lines: 15, // The number of lines to draw
					  length: 11, // The length of each line
					  width: 2, // The line thickness
					  radius: 4, // The radius of the inner circle
					  corners: 0.4, // Corner roundness (0..1)
					  rotate: 75, // The rotation offset
					  color: '#000', // #rgb or #rrggbb
					  speed: 0.8, // Rounds per second
					  trail: 15, // Afterglow percentage
					  shadow: false, // Whether to render a shadow
					  hwaccel: false, // Whether to use hardware acceleration
					  className: 'spinner', // The CSS class to assign to the spinner
					  zIndex: 2e9, // The z-index (defaults to 2000000000)
					  top: 'auto', // Top position relative to parent in px
					  left: 'auto' // Left position relative to parent in px
					};
				var target = document.getElementById(id);
				opts["length"] = (target.clientHeight - 2 * opts["radius"]) / 2 ;
				var spinner = new Spinner(opts).spin(target);
			}
		</script>
	</head>
	<body>
		<div id="main" class="container-fluid">
			<div class="row-fluid">
				<div class="span2"></div>
				<div class="span10">
					<h2><%= cur_dir %></h2>
					<table class="table table-striped table-bordered table-hover">
						<% files.each { |f| %>
						<tr>
							<td>
								<div id="<%= f["id"] %>" class="span1">
									<% if f.has_key?("icon") %>
									<i class="<%= f["icon"] %>"></i>
									<% end %>
								</div>
								<div class="span9">
									<% if f["is_dir"] %> <a href="/list<%= f["name"] %>"> <%= f["name"] %> </a>
									<% elsif f.has_key?("url") %> <a href="<%= f["url"] %>" onclick="do_spin('<%= f["id"] %>');"> <%= f["name"] %> </a>
									<% else %>
									<%= f["name"] %>
									<% end %>
								</div>
							</td>
						</tr>
						<% } %>
					</table>
				</div>
			</div>
		</div>
	</body>
</html>
